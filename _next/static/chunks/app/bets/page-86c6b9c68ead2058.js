(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[707],{5037:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(5155),r=s(2115),l=s(1994);let n={spreadsheetId:"1xnzP5_7l9Nak16zUQ5onyEMSRYyNgSi2zLj5HceT6b8",apikey:"AIzaSyBbfVg70JltuonfzlJQYWxyhfH_jKEBOKA"},o=n.spreadsheetId,i=n.apikey;function d(){let[e,t]=(0,r.useState)({values:[],loading:!0,error:null}),[s,n]=(0,r.useState)([]),[d,c]=(0,r.useState)(!0),[u,p]=(0,r.useState)([]),[h,g]=(0,r.useState)(!1),[f,m]=(0,r.useState)("Edit"),[v,x]=(0,r.useState)([]),[w,j]=(0,r.useState)(!1),[S,y]=(0,r.useState)("");(0,r.useEffect)(()=>{sessionStorage.getItem("password_input")&&j(!0)},[]),(0,r.useEffect)(()=>{fetch("https://sheets.googleapis.com/v4/spreadsheets/".concat(o,"/values/").concat(encodeURIComponent("Bets!A:G"),"?key=").concat(i)).then(e=>{if(!e.ok)throw Error("HTTP ".concat(e.status));return e.json()}).then(e=>{let s=e.values||[],a=s.length>0&&isNaN(parseFloat(s[0][1]))?s.slice(1).map((e,t)=>[...e,t+2]):s;t({values:a,loading:!1,error:null}),n(a.slice(-10).reverse()),N(a)}).catch(e=>t({values:[],loading:!1,error:e.message}))},[]);let N=e=>{p([...new Set(e.map(e=>e[5]).filter(e=>!e.includes(",")).map(e=>e.trim()))])},b=e=>e.filter(e=>e[3]!==l.Kl.Open);async function E(){if(0!==v.length){try{await fetch("/bets/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({values:v,update:!0,password:sessionStorage.getItem("password_input")})})}catch(e){console.log("Network Error:",e),alert("Network Error: ".concat(e.message))}x([]),window.location.reload()}}function k(){""!==S&&(sessionStorage.setItem("password_input",S),j(!0))}let C=e.values.filter(e=>e[3]===l.Kl.Open).sort((e,t)=>t[7]-e[7]),B=(()=>{let t=b(e.values),s=t.reduce((e,t)=>e+parseFloat(t[1].replace(/^\$/,"")),0),a=t.reduce((e,t)=>e+parseFloat(t[4].replace(/^\$/,"")),0),r=t.length>0?(t.filter(e=>e[3]===l.Kl.Won).length/t.length*100).toFixed(1):0,n=t.length>0?t[t.length-1][0]:null,o=t.filter(e=>e[0]===n).reduce((e,t)=>e+(parseFloat(t[4].replace(/^\$/,""))-parseFloat(t[1].replace(/^\$/,""))),0);return{totalWagered:s,totalReturn:a,profit:a-s,winRate:r,totalBets:t.length,lastDay:n,lastDayProfit:o}})();return e.loading?(0,a.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,a.jsx)("div",{className:"text-lg",children:"Loading betting data..."})}):e.error?(0,a.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,a.jsxs)("div",{className:"text-red-600",children:["Error: ",e.error]})}):(0,a.jsxs)("div",{className:"relative min-h-screen bg-gray-50 lg:overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-6 items-center min-h-screen transition-all duration-300 ease-in-out ".concat(h?"w-[78vw]":"w-screen"),children:[(0,a.jsx)(l.Ux,{titleOnClick:()=>j(!1),addOnClick:()=>g(!h),editOnClick:()=>void("Save"===f&&E(),m("Edit"===f?"Save":"Edit")),mode:f}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 w-full p-6",children:[(0,a.jsx)(l.r0,{getCompletedBets:b,last10Bets:s,editable:"Save"===f,editedBets:v,setEditedBets:x}),(0,a.jsx)(l.mo,{openBets:C,editable:"Save"===f,editedBets:v,setEditedBets:x}),(0,a.jsx)(l.XP,{profits:B,dropdownClick:()=>c(!d),showDropdown:d,uniqueSports:u,data:e.values})]})]}),(0,a.jsx)(l.AZ,{isOpen:h,onClose:()=>g(!1)}),!w&&(0,a.jsx)("div",{className:"absolute top-0 left-0 w-full h-full bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex justify-center items-center bg-white p-4 rounded-lg shadow-md gap-4",children:[(0,a.jsx)("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Enter Password",onChange:e=>y(e.target.value),value:S,onKeyDown:e=>{"Enter"===e.key&&k()}}),(0,a.jsx)("button",{className:"bg-blue-500 text-white p-2 rounded-md cursor-pointer",onClick:()=>k(),children:"Submit"})]})})]})}},9819:(e,t,s)=>{Promise.resolve().then(s.bind(s,5037))}},e=>{e.O(0,[766,994,441,964,358],()=>e(e.s=9819)),_N_E=e.O()}]);