(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[545],{7190:e=>{"use strict";e.exports={baseurl:"https://cjtedft6ia.execute-api.us-east-2.amazonaws.com/prod"}},7481:(e,t,s)=>{Promise.resolve().then(s.bind(s,7973))},7973:(e,t,s)=>{"use strict";s.r(t),s.d(t,{AnalyzePage:()=>c,default:()=>d});var l=s(5155),n=s(3464),a=s(2115),i=s(9641);let r=s(7190),o=r.baseurl;function c(){let[e,t]=(0,a.useState)(null),[s,c]=(0,a.useState)("Upload to see result"),[d,u]=(0,a.useState)("loading..."),[x,f]=(0,a.useState)(!1);async function g(t){t.preventDefault();let s=o+"/upload",l={headers:{"Content-Type":"application/json"}};if(!e)return void console.log("no file detected");let a=new FileReader;a.onload=()=>{console.log("reading text...");let t=a.result;if(""===t)return void console.log("empty file");let r=i.Buffer.from(t),o=JSON.parse(JSON.stringify({filename:e.name,data:r.toString("base64")}));console.log("calling /upload..."),n.A.post(s,o,l).then(e=>{console.log(e),f(!0),Promise.resolve(h())}).catch(e=>{console.log(e)})},a.readAsText(e)}async function h(){if(!x)return void c("Submit a file first!");c("Updating..."),await n.A.get(o+"/download",r).then(e=>{console.log(e);let t=i.Buffer.from(e.data,"base64").toString().split("\n");c(t[t.length-2].substring(6))}).catch(e=>{console.log(e),c("Error, try again.")})}async function m(){await n.A.get(o+"/stats").then(e=>{console.log(e),u(e.data)}).catch(e=>{console.log(e)})}async function p(){await n.A.delete(o+"/clear").then(e=>{console.log(e)}).catch(e=>{console.log(e)})}return(0,a.useEffect)(()=>{m()},[]),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"flex justify-center p-5 bg-red-700 text-white text-2xl animate-pulse",children:"DOES NOT WORK ANYMORE!"}),(0,l.jsx)("div",{className:"flex justify-center mt-16 mb-10",children:(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"bg-gray-800 h-[24rem] min-w-[48rem] max-w-fit cursor-pointer text-white py-5 px-12 flex justify-center items-center hover:bg-indigo-900 duration-500 transition relative",onClick:h,children:[(0,l.jsx)("p",{className:"text-4xl",children:s}),(0,l.jsx)("p",{className:"text-xs absolute inset-x-0 bottom-0 text-gray-300",children:"Click to update"})]})})}),(0,l.jsx)("div",{className:"flex justify-center items-center",children:(0,l.jsxs)("div",{className:"mt-5",children:[(0,l.jsx)("p",{className:"font-semibold text-2xl",children:"Upload file here"}),(0,l.jsxs)("form",{onSubmit:g,className:"flex justify-between items-center p-5 border-2 border-black w-[40rem] mb-2",children:[(0,l.jsx)("input",{type:"file",onChange:e=>{console.log("handling file"),t(e.target.files[0])}}),(0,l.jsx)("input",{type:"submit",className:"py-3 px-5 w-32 bg-gray-700 cursor-pointer hover:bg-gray-500 duration-300 rounded-lg text-white"})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{className:"text-lg flex items-center",children:[(0,l.jsxs)("p",{children:["There are ",(0,l.jsx)("b",{children:d})," file(s) uploaded currently."]}),(0,l.jsx)("button",{className:"text-center text-xs bg-gray-700 text-white w-16 h-8 rounded-lg ml-4",onClick:m,children:"Refresh"})]}),(0,l.jsx)("button",{className:"text-center bg-gray-700 hover:bg-gray-500 duration-300 py-3 px-5 w-32 text-white mx-5 rounded-lg",onClick:p,children:"Clear files"})]})]})})]})}let d=Analyze}},e=>{e.O(0,[464,441,964,358],()=>e(e.s=7481)),_N_E=e.O()}]);