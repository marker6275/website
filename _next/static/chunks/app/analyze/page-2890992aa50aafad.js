(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[545],{7190:e=>{"use strict";e.exports={baseurl:"https://cjtedft6ia.execute-api.us-east-2.amazonaws.com/prod"}},7481:(e,t,s)=>{Promise.resolve().then(s.bind(s,7973))},7973:(e,t,s)=>{"use strict";s.r(t),s.d(t,{AnalyzePage:()=>c,default:()=>d});var r=s(5155),a=s(3464),n=s(2115),i=s(9641);let l=s(7190),o=l.baseurl;function c(){let[e,t]=(0,n.useState)(null),[s,c]=(0,n.useState)("Upload to see result"),[d,u]=(0,n.useState)("loading..."),[x,f]=(0,n.useState)(!1);async function m(t){t.preventDefault();let s=o+"/upload",r={headers:{"Content-Type":"application/json"}};if(!e)return void console.error("no file detected");let n=new FileReader;n.onload=()=>{let t=n.result;if(""===t)return void console.error("empty file");let l=i.Buffer.from(t),o=JSON.parse(JSON.stringify({filename:e.name,data:l.toString("base64")}));a.A.post(s,o,r).then(e=>{f(!0),Promise.resolve(h())}).catch(e=>{console.error(e)})},n.readAsText(e)}async function h(){if(!x)return void c("Submit a file first!");c("Updating..."),await a.A.get(o+"/download",l).then(e=>{let t=i.Buffer.from(e.data,"base64").toString().split("\n");c(t[t.length-2].substring(6))}).catch(e=>{console.error(e),c("Error, try again.")})}async function p(){await a.A.get(o+"/stats").then(e=>{u(e.data)}).catch(e=>{console.error(e)})}async function g(){await a.A.delete(o+"/clear").catch(e=>{console.error(e)})}return(0,n.useEffect)(()=>{p()},[]),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex justify-center p-5 bg-red-700 text-white text-2xl animate-pulse",children:"DOES NOT WORK ANYMORE!"}),(0,r.jsx)("div",{className:"flex justify-center mt-16 mb-10",children:(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"bg-gray-800 h-[24rem] min-w-[48rem] max-w-fit cursor-pointer text-white py-5 px-12 flex justify-center items-center hover:bg-indigo-900 duration-500 transition relative",onClick:h,children:[(0,r.jsx)("p",{className:"text-4xl",children:s}),(0,r.jsx)("p",{className:"text-xs absolute inset-x-0 bottom-0 text-gray-300",children:"Click to update"})]})})}),(0,r.jsx)("div",{className:"flex justify-center items-center",children:(0,r.jsxs)("div",{className:"mt-5",children:[(0,r.jsx)("p",{className:"font-semibold text-2xl",children:"Upload file here"}),(0,r.jsxs)("form",{onSubmit:m,className:"flex justify-between items-center p-5 border-2 border-black w-[40rem] mb-2",children:[(0,r.jsx)("input",{type:"file",onChange:e=>{t(e.target.files[0])}}),(0,r.jsx)("input",{type:"submit",className:"py-3 px-5 w-32 bg-gray-700 cursor-pointer hover:bg-gray-500 duration-300 rounded-lg text-white"})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"text-lg flex items-center",children:[(0,r.jsxs)("p",{children:["There are ",(0,r.jsx)("b",{children:d})," file(s) uploaded currently."]}),(0,r.jsx)("button",{className:"text-center text-xs bg-gray-700 text-white w-16 h-8 rounded-lg ml-4",onClick:p,children:"Refresh"})]}),(0,r.jsx)("button",{className:"text-center bg-gray-700 hover:bg-gray-500 duration-300 py-3 px-5 w-32 text-white mx-5 rounded-lg",onClick:g,children:"Clear files"})]})]})})]})}let d=c}},e=>{e.O(0,[464,441,964,358],()=>e(e.s=7481)),_N_E=e.O()}]);